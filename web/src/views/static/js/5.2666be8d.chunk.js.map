{"version":3,"sources":["app/apis/public.js","app/apis/private.js","app/services/users.js","app/components/user/Profile.jsx"],"names":["API","axios","create","timeout","headers","interceptors","response","use","res","err","a","alert","data","error","Object","entries","map","v","i","helper","toCapitalize","join","trim","statusText","console","Promise","reject","request","config","getCookie","status","window","confirm","logout","location","pathname","open","URL","process","user","PU","post","read","id","get","update","PR","put","list","name","Profile","props","componentDidMount","setProfile","usersService","split","then","setState","surname","setValue","e","fromEntries","Map","target","getAttribute","value","cancel","edit","submit","preventDefault","state","setCookie","reload","render","className","onSubmit","scope","colSpan","avatar","fullName","width","height","fontSize","type","onChange","email","dob","Date","getMonth","getDate","getFullYear","sex","getId","title","onClick","Component"],"mappings":"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","file":"static/js/5.2666be8d.chunk.js","sourcesContent":["import axios from 'axios'\nimport helper from '../services/helper'\n\nconst API = axios.create({\n  timeout: 20000,\n  headers: {\n    'Accept': 'application/json',\n    'Content-Type': 'application/json',\n  }\n})\n\nAPI.interceptors.response.use(res => res, async err => {\n  err.response\n    ? alert(typeof err.response.data === 'object'\n      ? err.response.data?.error || Object.entries(err.response.data).map((v, i) => (i + 1) + '. ' + helper.toCapitalize(v[0] + ' ' + v[1])).join('\\n')\n      : err.response.data.trim() || err.response.statusText)\n    : console.error(err)\n  return Promise.reject(err)\n})\n\nexport default API","import axios from 'axios'\nimport helper from '../services/helper'\n\nconst API = axios.create()\n\nAPI.interceptors.request.use(\n  async config => {\n    config.headers = {\n      'Authorization': `Bearer ${helper.getCookie('token')}`,\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    }\n    return config\n  },\n  err => Promise.reject(err)\n)\n\nAPI.interceptors.response.use(res => res, async err => {\n  if (err.response && err.response.status === 440 && window.confirm(err.response.data)) {\n    helper.logout()\n    window.location.pathname !== '/' && window.open('/')\n  } else err.response\n    ? alert(typeof err.response.data === 'object'\n      ? err.response.data?.error || Object.entries(err.response.data).map((v, i) => (i + 1) + '. ' + helper.toCapitalize(v[0] + ' ' + v[1])).join('\\n')\n      : err.response.data.trim() || err.response.statusText)\n    : console.error(err)\n  return Promise.reject(err)\n})\n\nexport default API","import PU from '../apis/public'\nimport PR from '../apis/private'\n\nconst URL = `${process.env.REACT_APP_API}users/`\n\nclass usersService {\n  create = user => PU.post(URL, user)\n\n  read = id => PU.get(`${URL}${id}`)\n\n  update = user => PR.put(`${URL}${user.id}`, user)\n\n  list = name => PR.get(`${URL}?name=${name}`)\n}\n\nexport default new usersService()","import React, { Component } from 'react'\nimport Avatar from '../user/Avatar'\nimport usersService from '../../services/users'\nimport helper from '../../services/helper';\n\nexport default class Profile extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      id: '',\n      avatar: '',\n      fullName: '',\n      email: '',\n      sex: '',\n      name: '',\n      surname: '',\n      edit: false,\n    }\n  }\n\n  componentDidMount = () => this.setProfile()\n\n  setProfile = () =>\n    usersService\n      .read(window.location.pathname?.split('/')?.[1])\n      .then(res => this.setState({ name: helper.getCookie('name'), surname: helper.getCookie('surname') }) || this.setState(res.data))\n\n  setValue = e => this.setState(Object.fromEntries(new Map([[e.target.getAttribute('name'), e.target.value]])))\n\n  cancel = () => this.setProfile() && this.setState({ edit: false })\n\n  submit = e =>\n    e.preventDefault()\n    || (this.state.edit\n      ? usersService\n        .update(this.state)\n        .then(res => this.setProfile() && helper.setCookie(res.data) && window.location.reload() && this.setState({ edit: false }))\n      : this.setState({ edit: true }))\n\n  render = () => <main>\n    <section className=\"section-only\">\n      <form className=\"form-only\" onSubmit={this.submit}>\n        <table className=\"table table-bordered\">\n          <thead>\n            <tr>\n              <th className=\"text-center\" scope=\"col\" colSpan={2}>\n                PROFILE\n              </th>\n            </tr>\n            <tr>\n              <th scope=\"col\" colSpan={2}>\n                <div className=\"container-only\">\n                  <Avatar avatar={this.state.avatar} name={this.state.fullName} width=\"200px\" height=\"200px\" fontSize=\"150px\" />\n                </div>\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            {this.state.edit && <tr>\n              <th className=\"align-middle\" scope=\"row\">Avatar</th>\n              <td>\n                <input type=\"color\" className=\"form-control\" name=\"avatar\" value={this.state.avatar} onChange={this.setValue} />\n              </td>\n            </tr>}\n            {!this.state.edit && <tr>\n              <th className=\"align-middle\" scope=\"row\">Full name</th>\n              <td>{this.state.fullName}</td>\n            </tr>}\n            {this.state.edit && <tr>\n              <th className=\"align-middle\" scope=\"row\">Name</th>\n              <td>\n                <input className=\"form-control\" type=\"text\" name=\"name\" value={this.state.name} onChange={this.setValue} />\n              </td>\n            </tr>}\n            {this.state.edit && <tr>\n              <th className=\"align-middle\" scope=\"row\">Surname</th>\n              <td>\n                <input className=\"form-control\" type=\"text\" name=\"surname\" value={this.state.surname} onChange={this.setValue} />\n              </td>\n            </tr>}\n            <tr>\n              <th className=\"align-middle\" scope=\"row\">Email</th>\n              <td>{this.state.edit ? <input className=\"form-control\" type=\"text\" name=\"email\" value={this.state.email} onChange={this.setValue} /> : this.state.email}</td>\n            </tr>\n            <tr>\n              <th className=\"align-middle\" scope=\"row\">Date of birth</th>\n              <td>{this.state.edit ? <input className=\"form-control\" type=\"date\" name=\"dob\" value={this.state.dob} onChange={this.setValue} /> : (new Date(this.state.dob).getMonth() + 1) + '/' + new Date(this.state.dob).getDate() + '/' + new Date(this.state.dob).getFullYear()}</td>\n            </tr>\n            <tr>\n              <th className=\"align-middle\" scope=\"row\">Sex</th>\n              <td>{this.state.edit ? <select className=\"form-select\" name=\"sex\" value={this.state.sex} onChange={this.setValue}>\n                <option value=\"Male\">Male</option>\n                <option value=\"Female\">Female</option>\n                <option value=\"Other\">Other</option>\n              </select> : this.state.sex}</td>\n            </tr>\n            {window.location.pathname?.split('/')?.[1] === helper.getId() && <tr>\n              <td colSpan={2}>\n                <div className=\"container-only\">\n                  <button className={`btn-profile text-${this.state.edit ? 'warning' : 'info'}`} title={this.state.edit ? 'Save' : 'Edit'} type=\"submit\"><i className=\"material-icons\">{this.state.edit ? 'save' : 'edit'}</i></button>\n                  {this.state.edit && <button className={`btn-profile text-danger`} title=\"Cancel\" type=\"button\" onClick={this.cancel}><i className=\"material-icons\">cancel</i></button>}\n                </div>\n              </td>\n            </tr>}\n          </tbody>\n        </table>\n      </form>\n    </section>\n  </main>\n\n}\n"],"sourceRoot":""}